<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <h1>Friends and Family</h1>
        
        <p>Names:
            <select id = 'Names'>
            
            </select>
        </p>
        
        <script>
            //drop down list script
            
            //read the JSON file  "data_file" holds info from "FriendsAndFamily.json"
            var data_file = "FriendsAndFamily.json";
            var http_request = new XMLHttpRequest();

            //check browswers for correct AJAX call
            try {
                // Opera 8.0+, Firefox, Chrome, Safari
                http_request = new XMLHttpRequest();

            } catch (e) {
                // Internet Explorer Browsers
                try {
                    http_request = new ActiveXObject("Msxml2.XMLHTTP");
                } catch (e) {
                    try {
                        http_request = new ActiveXObject("Microsoft.XMLHTTP");
                    } catch (e) {
                        // Something went wrong
                        alert("Your browser broke!");
                    }
                }
            }
            
            //onreadystatechange designates a funciton to be called when readyState property changes
            http_request.onreadystatechange = function () {
                //listen for server response "4" means request is finished and response is ready
                if (http_request.readyState == 4) {
                    // Javascript function JSON.parse to parse JSON data
                    var jsonObj = JSON.parse(http_request.responseText);
                    var text = "<option value='0'>--</option>";//begin the list
                    
                    //scroll through array adding html + people first name to string "text" which will create the list
                    for (var i = 0; i < jsonObj.people.length; i++) {
                        text = text + "<option value = '" + jsonObj.people[i].name + "'> " + jsonObj.people[i].name + " " + jsonObj.people[i].lname +"</option>";
                    }
                    //find div "BookSel" and put value of "text" in there
                    //this propogates the list because of the HTML in 'text'
                    document.getElementById("Names").innerHTML = text;
                }
            }
            
            //use a "GET" request to open data_file ("FriendsAndFamilyList.json"), true means to run function when ready
            http_request.open("GET", data_file, true);
            http_request.send();
        </script>
    </body>
</html>
